from cProfile import label
import torch 
import torch.nn as nn
import matplotlib.pyplot as plt
import cvxpy as cvx
import numpy as np
import sys
sys.path.insert(0, 'examples')
import time
import gurobipy as gp
from gurobipy import GRB

from exampleMPC5 import *
import csv
torch.manual_seed(0)

stepNum = 200
n_in, n_h, n_out = 3, 10, 1
leadVelocity = 16
kd = 0.1
stableVelocity = 30
uLimit = 1.

mpcSafe = [16.0, 14.91971328653078, 13.828345612881584, 12.726896644418701, 11.616275861324802, 10.497310695048235, 9.370753930759712, 8.237290441731673, 7.1668950974536045, 6.198749260734296, 5.3202987109109685, 4.520694320393858, 3.7905529928177444, 3.121752421131532, 2.509656955782617, 1.956854869980809, 1.4681366054475546, 1.0458415602024758, 0.6919818200684489, 0.4084945487316105, 0.19731218106262105, 0.06043393393603935, 9.66226210152854e-08, 2.914006813625747e-10, 1.9423396224738099e-10, 9.71240865510481e-11, 1.956834694283316e-10, 5.715946826967411e-09, 4.5618406829817104e-09, 5.845485873123835e-09, 3.6087683952246152e-09, 4.318799540214968e-09, 8.219728897529421e-09, 6.625569426432776e-09, 6.1782685634170775e-09, 8.168370868588681e-09, 3.6796095059798972e-09, 1.7601706758796354e-09, 1.6403163272116217e-09, 1.5310348544517183e-09, 1.4132268688626937e-09, 1.2811867122763942e-09, 1.1463043847470544e-09, 1.0024194807556341e-09, 8.210605528802262e-10, 6.101643634792708e-10, 4.525801955423958e-10, 4.502638262238179e-10, 4.375095841169241e-10, 3.602664833124436e-10, 2.2578205971512944e-10, 1.6185452977879322e-10, 1.0975043096550507e-10, 1.616662359538168e-10, 1.3080381222607684e-10, 1.9820589614027995e-10, 1.532143301119504e-10, 8.839293741402798e-10, 8.418830077516759e-10, 7.592824147195643e-10, 4.1795544802880613e-10, 2.6428281785229046e-10, 1.0445688758409233e-10, 5.589129159488948e-11, 5.5280224842135794e-11, 5.558575821851264e-11, 5.5575100077476236e-11, 5.544720238503942e-11, 6.421174703064025e-11, 7.836220561330265e-11, 6.719247380715387e-11, 7.334222118515754e-11, 7.94564414263732e-11, 8.569145393266808e-11, 1.268816163246811e-10, 8.591882760811131e-11, 9.255174404643185e-11, 9.905321007863677e-11, 1.0540901485001086e-10, 1.3110224017509609e-10, 1.999183041334618e-10, 1.0945200301648583e-10, 1.1402434552110208e-10, 8.72084626735159e-11, 9.281109214498429e-11, 9.844569603956188e-11, 1.0414424878035788e-10, 1.0953726814477704e-10, 1.148912076587294e-10, 1.2019896189485735e-10, 1.2543921457108809e-10, 1.3059775483270641e-10, 1.3559997569245752e-10, 1.4057377484277822e-10, 1.454338871553773e-10, 1.5017320720289717e-10, 1.5478818227165902e-10, 1.5928591778902046e-10, 1.6364509747290867e-10, 1.6787637946436007e-10, 1.7197265833601705e-10, 1.759303813742008e-10, 1.7975310129259015e-10, 1.8343726537750626e-10, 1.8698642634262796e-10, 1.9040413690163405e-10, 1.936903970545245e-10, 1.9685586494233576e-10, 1.9988632971035258e-10, 2.027853440722538e-10, 2.0557067159643339e-10, 2.0823875956921256e-10, 2.1078960799059132e-10, 2.1323032228792727e-10, 2.15568007888578e-10, 2.177991120788647e-10, 2.199236348587874e-10, 2.219451289420249e-10, 2.2388135789697117e-10, 2.2571455815523223e-10, 2.276010491186753e-10, 2.333564452783321e-10, 2.388773623351881e-10, 2.434212831303739e-10, 2.4585133928667346e-10, 2.48174814032609e-10, 2.503774965134653e-10, 2.524771502976364e-10, 2.544808808124799e-10, 2.5637092448960175e-10, 2.5818280846579e-10, 2.5989521645897184e-10, 2.6151880661018367e-10, 2.630642370604619e-10, 2.645279550961277e-10, 2.659241715718963e-10, 2.672457810604101e-10, 2.6849633627534786e-10, 2.696758372167096e-10, 2.708020474528894e-10, 2.7187141427020833e-10, 2.728839376686665e-10, 2.738396176482638e-10, 2.7474200692267914e-10, 2.7560886906030646e-10, 2.76418887779073e-10, 2.771862739336939e-10, 2.77914580237848e-10, 2.786038066915353e-10, 2.792539532947558e-10, 2.7988278361590346e-10, 2.8046187594554794e-10, 2.81012546565762e-10, 2.815312427628669e-10, 2.8203572810525657e-10, 2.8250113359717943e-10, 2.829381173796719e-10, 2.8335733759377035e-10, 2.83755241525796e-10, 2.8413182917574886e-10, 2.844835478299501e-10, 2.8482105562943616e-10, 2.851336944331706e-10, 2.8543567509586865e-10, 2.857163394764939e-10, 2.859827930024039e-10, 2.8623858838727756e-10, 2.864766202037572e-10, 2.867039938792004e-10, 2.8692070941360726e-10, 2.871161086659413e-10, 2.873079552045965e-10, 2.8748914360221534e-10, 2.8765967385879776e-10, 2.878195459743438e-10, 2.87975865376211e-10, 2.881144212096842e-10, 2.8824942432947864e-10, 2.8837732202191546e-10, 2.885016670006735e-10, 2.886118011247163e-10, 2.887219352487591e-10, 2.888214112317655e-10, 2.8892088721477194e-10, 2.8901325777042075e-10, 2.8910207561239076e-10, 2.891837880270032e-10, 2.89258395014258e-10, 2.89329449287834e-10, 2.894040562750888e-10, 2.894680051213072e-10, 2.89524848540168e-10, 2.8958169195902883e-10, 2.8963498266421084e-10, 2.8968472065571405e-10, 2.8974156407457485e-10, 2.8978419663872046e-10, 2.8983038191654487e-10, 2.8986946176701167e-10, 2.899049889037997e-10, 2.899049889037997e-10]
nnSafe = [16.0, 14.904422760009766, 13.822707748413087, 12.75471038818359, 11.70030479431152, 10.65934677124023, 9.6317138671875, 8.617265701293945, 7.615869903564452, 6.627376556396484, 5.65157775878906, 4.687948608398436, 3.735163497924802, 2.7922088623046832, 1.8600479125976577, 0.939448547363277, 0.030545806884767046, -0.8667373657226562, -1.7524940490722685, -2.626840972900389, -3.48988494873047, -4.341725540161136, -5.1824211120605455, -6.011895370483401, -6.8296073913574205, -7.633447265625001, -8.416317749023442, -9.159513092041017, -9.835051727294925, -10.429290008544925, -10.943860626220705, -11.384692382812503, -11.758431243896489, -12.050394439697264, -12.234572601318362, -12.329569625854496, -12.369225692749026, -12.369878387451173, -12.338248062133793, -12.279524612426762, -12.200950241088869, -12.1123950958252, -12.022780990600587, -11.9349063873291, -11.84644813537598, -11.756070327758792, -11.667631149291992, -11.590304183959965, -11.534341049194339, -11.5052490234375, -11.502350997924808, -11.521682739257812, -11.558483123779297, -11.608061981201175, -11.666117095947264, -11.728942489624025, -11.793579864501957, -11.85778388977051, -11.919940567016603, -11.978945922851565, -12.034070587158205, -12.084874725341798, -12.131122589111328, -12.172735595703127, -12.209757232666018, -12.242326736450195, -12.270648193359374, -12.29500503540039, -12.315732955932617, -12.333214950561523, -12.347876358032227, -12.360171127319337, -12.370580673217773, -12.379586029052735, -12.387666320800783, -12.395276260375976, -12.402836990356445, -12.4107177734375, -12.419234848022462, -12.428632736206055, -12.439093780517577, -12.450745010375979, -12.463647460937501, -12.477814483642579, -12.49322052001953, -12.509802246093752, -12.527476119995118, -12.546144866943362, -12.565699005126955, -12.586027908325196, -12.607019042968751, -12.62856216430664, -12.6505558013916, -12.672900772094728, -12.695510482788087, -12.71829719543457, -12.741196441650391, -12.764139556884768, -12.787068939208986, -12.809931564331055, -12.832684326171876, -12.85528144836426, -12.877692413330077, -12.899886322021484, -12.921842193603517, -12.94353370666504, -12.96493911743164, -12.986046981811523, -13.006838607788087, -13.027305603027344, -13.047435760498047, -13.067223739624023, -13.08666572570801, -13.105751037597656, -13.12448081970215, -13.142847442626955, -13.160852050781251, -13.178490447998048, -13.195763397216798, -13.212673568725588, -13.229216384887696, -13.245393562316895, -13.26120834350586, -13.276663970947265, -13.291755867004394, -13.306490707397462, -13.320871734619143, -13.334896850585938, -13.34857177734375, -13.361897850036623, -13.374877357482912, -13.387511634826662, -13.399805450439455, -13.411763572692873, -13.423387336730958, -13.434674644470217, -13.44563617706299, -13.456269836425783, -13.46657943725586, -13.476566314697266, -13.486237716674804, -13.495594024658203, -13.504640007019045, -13.513376045227051, -13.521809387207032, -13.529936981201171, -13.537765121459962, -13.54529857635498, -13.552537727355958, -13.559486389160156, -13.566143989562988, -13.57251777648926, -13.578608131408693, -13.584421348571777, -13.589954376220703, -13.595214462280275, -13.6002010345459, -13.604921340942383, -13.609374809265137, -13.613565254211426, -13.6174955368042, -13.621165084838868, -13.624581146240235, -13.627743148803713, -13.630653953552248, -13.633316421508791, -13.635734367370606, -13.637907218933105, -13.63984031677246, -13.641534042358398, -13.642991256713866, -13.644214820861816, -13.645207595825195, -13.645972442626952, -13.646508789062501, -13.646819496154787, -13.646910858154296, -13.646781349182131, -13.646434783935547, -13.645869636535647, -13.64509220123291, -13.644104385375979, -13.642906570434572, -13.641500663757324, -13.639888572692872, -13.638074111938476, -13.63605823516846, -13.63384475708008, -13.631435585021972, -13.628829193115234, -13.626028442382815, -13.623039627075197, -13.619861221313478, -13.616495132446289, -13.612944221496583, -13.60920696258545, -13.605289649963378, -13.601191520690918, -13.596916389465331, -13.592465209960938, -13.587839126586914]
QPnnSafe = [16.0, 14.904422760009766, 13.822707748413087, 12.75471038818359, 11.70030479431152, 10.65934677124023, 9.6317138671875, 8.668540954589844, 7.801683044433595, 7.0215114593505845, 6.319356918334961, 5.687419891357422, 5.118675613403319, 4.606803131103511, 4.146123886108398, 3.7315101623535156, 3.3583572387695284, 3.02251930236816, 2.7202651977539034, 2.448237609863277, 2.203411865234372, 1.9830707550048814, 1.784759521484375, 1.6062778472900376, 1.4456470489501925, 1.3010810852050767, 1.1709705352783217, 1.0538742065429645, 0.9484848022460923, 0.8536346435546847, 0.768268203735353, 0.6914398193359332, 0.6222930908203139, 0.5600620269775405, 0.5040573120117173, 0.5158184051513643, 0.6303260803222628, 0.8390018463134723, 1.1155082702636676, 1.4398818969726577, 1.8018249511718736, 2.196465682983394, 2.6213729858398445, 3.075060653686524, 3.5562908172607415, 4.063730621337889, 4.5957817077636705, 5.150492477416993, 5.725542831420899, 6.318332290649412, 6.926146697998046, 7.546369361877442, 8.176643943786619, 8.81494598388672, 9.459553337097166, 10.109022331237792, 10.762171745300293, 11.41815719604492, 12.076525497436524, 12.737250328063965, 13.400676345825193, 14.067429542541504, 14.738290214538573, 15.414100074768065, 16.09567699432373, 16.783777236938477, 17.479068565368653, 18.182123947143555, 18.893436622619628, 19.613422393798828, 20.342427444458007, 21.080763053894042, 21.828686141967772, 22.5864351272583, 23.354226303100585, 24.132266616821287, 24.920759773254392, 25.719920349121093, 26.529975128173827, 27.35116958618164, 28.18378448486328, 29.02813262939453, 29.884575843811035, 30.753531455993652, 31.63547706604004, 32.53097057342529, 33.440649795532224, 34.365245246887206, 35.30558319091797, 36.26260261535644, 37.23734073638916, 38.2309289932251, 39.24456996917725, 40.279511070251466, 41.33700332641602, 42.4182315826416, 43.52424964904785, 44.655884456634524, 45.81366567611694, 46.99774017333984, 48.207819080352785, 49.443190574645996, 50.70289421081543, 51.986036682128905, 53.29212026596069, 54.6210280418396, 55.97269792556763, 57.34687423706055, 58.74300146102905, 60.16035528182984, 61.59811248779297, 63.055387020111084, 64.5311972618103, 66.02444639205933, 67.53407354354859, 69.05934286117554, 70.59990992546082, 72.15555210113526, 73.72577538490296, 75.30961875915527, 76.90540390014648, 78.5104208946228, 80.12049922943115, 81.72969350814819, 83.33079595565796, 84.9173855304718, 86.48680262565613, 88.04125947952271, 89.58592619895936, 91.12608706951141, 92.6656402349472, 94.20691547393798, 95.75109717845916, 97.29880585670472, 98.85053389072418, 100.40671458244324, 101.9676727294922, 103.53358585834503, 105.10452530384063, 106.68049008846283, 108.26145479679107, 109.84736042022705, 111.4381317615509, 113.03365187644958, 114.63374524116516, 116.23812518119811, 117.84627904891968, 119.45727058649064, 121.06937069892884, 122.6794784784317, 124.28237265348434, 125.87035348415375, 127.43470997810364, 128.96962735652923, 130.475153028965, 131.95495048761367, 133.41185071468354, 134.8462152481079, 136.25757656097412, 137.6468607187271, 139.0169427394867, 140.37143247127534, 141.71337835788728, 143.04481678009034, 144.3668573617935, 145.67985837459565, 146.98351740837097, 148.27694716453553, 149.558585357666, 150.8264372587204, 152.07852058410646, 153.3137043952942, 154.53214015960694, 155.73512058258058, 156.9243137359619, 158.10127353668213, 159.26716799736022, 160.42282581329346, 161.56879076957702, 162.70544514656066, 163.8330416202545, 164.9517539024353, 166.06173944473267, 167.1631286621094, 168.25601954460143, 169.34051632881165, 170.41670069694518, 171.48466787338256, 172.54450964927673, 173.5963025569916, 174.6401214122772, 175.67605714797975, 176.7041841506958, 177.72457723617555, 178.73731164932252, 179.74247617721556, 180.74013166427613, 181.73036861419678, 182.71324701309203, 183.68885822296141, 184.65726137161255]
QPDiffnnSafe = [16.0, 14.694171905517578, 13.392619705200197, 12.095300292968751, 10.88577308654785, 9.797191238403322, 8.81747055053711, 7.935722351074219, 7.142149353027342, 6.42793426513672, 5.785138320922847, 5.206621932983396, 4.685959243774413, 4.217361831665038, 3.7956241607666, 3.4160594940185547, 3.0744506835937457, 2.7670013427734332, 2.490299987792966, 2.241267013549802, 2.0171379089355455, 1.8154209136962862, 1.6338752746582017, 1.470484924316402, 1.3234340667724567, 1.191086959838863, 1.0719726562499972, 0.9647720336914034, 0.8682914733886733, 0.7814601898193345, 0.703310394287108, 0.6329811096191378, 0.5696807861328139, 0.51270942687988, 0.4614402770996051, 0.41529693603515483, 0.37376708984374574, 0.3363891601562514, 0.3027450561523395, 0.2724681854248061, 0.2452220916748047, 0.22069664001464417, 0.19862670898437074, 0.17875976562499574, 0.16088104248046875, 0.14479179382323792, 0.13031044006347514, 0.11727867126464986, 0.10554733276367045, 0.09499473571776917, 0.08549461364746236, 0.07694358825683523, 0.06924972534179474, 0.06232490539550639, 0.056092071533203836, 0.050483322143552556, 0.04543457031249787, 0.04088897705078054, 0.03679656982421875, 0.0331165313720696, 0.029804611206053266, 0.026821517944334516, 0.024142074584961648, 0.021730422973632812, 0.019559097290038352, 0.017602157592772727, 0.015845489501952414, 0.014258956909177556, 0.0128326416015625, 0.011547470092772016, 0.010390853881833806, 0.009352874755858664, 0.008414459228514914, 0.007569503784178977, 0.006814575195310368, 0.006131744384763493, 0.005517578124997868, 0.004964447021482243, 0.004470443725583806, 0.00402069091796875, 0.003620147705078125, 0.003255081176757102, 0.0029266357421882105, 0.0026363372802720164, 0.002368927001953125, 0.0021305084228515625, 0.0019157409667975855, 0.0017246246337876414, 0.0015544891357421875, 0.001401138305663352, 0.001262664794921875, 0.001135635375977273, 0.0010223388671875, 0.0009201049804694605, 0.0008300781249985789, 0.0007469177246086645, 0.000672531127928977, 0.000605392456055398, 0.000544357299805398, 0.0004901885986328125, 0.0004425048828125, 0.0003971099853501414, 0.00035743713378977304, 0.00032005310058380587, 0.00028686523437571054, 0.00025825500488352304, 0.00023117065429545391, 0.00020637512206889141, 0.00018653869628693087, 0.00016746520995880587, 0.00015182495117116446, 0.00013580322265482891, 0.00012245178222514141, 0.00010986328124928946, 9.803771972727304e-05, 8.850097656321054e-05, 8.125305175710196e-05, 7.324218750071054e-05, 6.446838378693087e-05, 6.065368652130587e-05, 5.340576171875e-05, 4.844665527414804e-05, 4.463195800852304e-05, 4.081726074289804e-05, 3.585815429474337e-05, 3.24249267578125e-05, 2.9373168946023043e-05, 2.5939941405539457e-05, 2.288818359375e-05, 2.1362304686078915e-05, 1.8692016599430872e-05, 1.9454956053266415e-05, 1.9454956053266415e-05, 1.6403198241476957e-05, 1.4877319333805872e-05, 1.6021728516335543e-05, 1.4114379883523043e-05, 1.3732910154828915e-05, 1.1062622068180872e-05, 9.155273435368372e-06, 1.1062622068180872e-05, 1.1062622068180872e-05, 1.0681152343039457e-05, 1.1062622068180872e-05, 1.0299682617898043e-05, 8.010864256391415e-06, 9.155273435368372e-06, 9.918212889203915e-06, 8.392333985085543e-06, 7.62939453125e-06, 7.62939453125e-06, 8.010864256391415e-06, 4.959106444601957e-06, 5.340576169743372e-06, 3.814697265625e-06, 1.9073486328125e-06, 1.1444091789769573e-06, -3.814697286941282e-07, 7.629394538355427e-07, 7.629394538355427e-07, -3.814697286941282e-07, 7.629394538355427e-07, 3.8146972514141453e-07, -1.5258789076710855e-06, -1.5258789076710855e-06, -1.5258789076710855e-06, -3.4332275404835855e-06, -3.814697265625e-06, -2.6702880866480427e-06, -1.9073486328125e-06, -1.5258789076710855e-06, -3.4332275404835855e-06, -4.196166994319128e-06, -3.814697265625e-06, -4.196166994319128e-06, -3.4332275404835855e-06, -5.3405761732960855e-06, -4.577636719460543e-06, -3.0517578117894573e-06, -4.196166994319128e-06, -4.577636719460543e-06, -4.196166994319128e-06, -1.5258789076710855e-06, -3.4332275404835855e-06, -3.0517578117894573e-06, -3.814697265625e-06, -2.288818361506628e-06, -1.9073486328125e-06, -1.1444091789769573e-06, 0.0, 0.0, 3.8146972514141453e-07, -7.629394538355427e-07, -1.5258789076710855e-06, -1.9073486328125e-06, 1.5258789041183718e-06, 0.0, 2.2888183579539145e-06, 3.0517578117894573e-06, 2.2888183579539145e-06, 0.0]
gaugeNNSafe = [16.0, 14.783799743652345, 13.578775787353514, 12.384989166259764, 11.24241142272949, 10.202557754516597, 9.2566837310791, 8.396641159057616, 7.615403747558595, 6.906415939331055, 6.263294982910153, 5.680265426635742, 5.15213050842285, 4.6741943359375, 4.2424095153808565, 3.8528995513916016, 3.5015579223632827, 3.1848373413085938, 2.899644470214845, 2.643160629272458, 2.4128147125244155, 2.206256866455078, 2.021343994140622, 1.856130599975586, 1.7088771820068374, 1.5780490875244126, 1.4623233795165973, 1.360605239868164, 1.2719947814941364, 1.1958530426025362, 1.1319820404052692, 1.08094673156738, 1.0446277618408217, 1.0272418975830035, 1.036496734619142, 1.0820060729980483, 1.167149734497066, 1.2842308044433608, 1.4218078613281264, 1.5713367462158203, 1.7277332305908217, 1.888066482543941, 2.05052108764648, 2.213827133178711, 2.3769584655761733, 2.538940811157225, 2.6987571716308594, 2.855222702026367, 3.015776824951171, 3.181885147094725, 3.3512828826904304, 3.5211154937744134, 3.68788833618164, 3.8475284576416016, 3.995619201660155, 4.127859497070311, 4.24068717956543, 4.33182601928711, 4.400516891479491, 4.447368240356443, 4.473891639709471, 4.482032585144044, 4.473788070678712, 4.451004791259766, 4.415282058715821, 4.367966079711913, 4.310174179077148, 4.242840194702147, 4.166761779785155, 4.082622909545897, 3.9910339355468736, 3.8925342559814453, 3.787612533569334, 3.6767135620117166, 3.5602294921874993, 3.4385108947753906, 3.3118732452392585, 3.180585098266601, 3.044890213012696, 2.9049983978271463, 2.7610866546630852, 2.6133159637451158, 2.461823654174804, 2.306734085083008, 2.148154830932615, 2.001492309570313, 1.8680141448974616, 1.746593856811522, 1.6362071990966776, 1.535890960693358, 1.4447731018066392, 1.3620483398437493, 1.2869796752929688, 1.2188903808593743, 1.1571578979492188, 1.1012210845947266, 1.05055923461914, 1.0046951293945305, 0.9632030487060526, 0.9256847381591804, 0.8917819976806634, 0.8611598968505838, 0.8335243225097635, 0.8086032867431641, 0.7861400604248026, 0.7659111022949219, 0.7477085113525384, 0.7313442230224609, 0.7166461944580078, 0.7034572601318345, 0.6916332244873047, 0.6810466766357415, 0.6715801239013679, 0.6631259918212891, 0.6555831909179695, 0.6488677978515618, 0.6428974151611335, 0.6375980377197266, 0.6329044342041001, 0.628754806518554, 0.6250942230224616, 0.6218780517578111, 0.6190567016601562, 0.6165927886962876, 0.6144489288330064, 0.6125862121582024, 0.6109813690185533, 0.6096008300781257, 0.6084270477294922, 0.607433700561522, 0.6066017150878906, 0.6059104919433587, 0.6053462982177713, 0.6048923492431619, 0.6045387268066413, 0.6042690277099609, 0.6040790557861335, 0.6039543151855469, 0.6038875579833984, 0.6038681030273416, 0.6038940429687507, 0.6039550781250007, 0.6040496826171875, 0.6041713714599588, 0.6043136596679695, 0.6044719696044929, 0.604647064208983, 0.6048347473144524, 0.6050342559814439, 0.6052379608154297, 0.605448913574218, 0.6056617736816392, 0.6058742523193352, 0.606089782714843, 0.6063049316406257, 0.6065177917480469, 0.6067268371582024, 0.606932449340821, 0.6071346282958991, 0.6073322296142578, 0.6075271606445298, 0.6077167510986321, 0.6078979492187493, 0.6080749511718757, 0.6082466125488288, 0.6084136962890625, 0.6085735321044901, 0.6087287902832017, 0.6088768005371072, 0.6090202331542969, 0.6091548919677727, 0.6092853546142578, 0.6094127655029276, 0.6095329284667947, 0.6096504211425788, 0.6097595214843743, 0.6098648071289041, 0.6099658966064432, 0.6100624084472663, 0.6101554870605455, 0.610241317749022, 0.6103229522705078, 0.6104034423828111, 0.6104755401611328, 0.610547637939451, 0.6106159210205071, 0.6106819152832017, 0.6107418060302727, 0.6108005523681648, 0.6108543395996087, 0.6109066009521484, 0.6109535217285149, 0.6110000610351562, 0.6110443115234361, 0.611086273193358, 0.6111255645751932, 0.6111621856689453, 0.6111976623535149, 0.6112300872802727, 0.6112628936767557, 0.6112941741943345]

print(len(mpcSafe), len(nnSafe), len(QPnnSafe), len(gaugeNNSafe))
assert len(mpcSafe) == len(nnSafe)
assert len(nnSafe) == len(QPnnSafe)
assert len(QPnnSafe) == len(gaugeNNSafe)

figurex = np.linspace(0, len(mpcSafe), num=len(mpcSafe))*0.1
safeLine = np.linspace(0, 0, num=len(mpcSafe))
plt.plot(figurex, mpcSafe, label = "MPC", color = 'r')
plt.plot(figurex, nnSafe, label = "NN", color = 'y')
plt.plot(figurex, QPnnSafe, label = "NN-QP", color = 'c')
plt.plot(figurex, QPDiffnnSafe, label = "NN-diff-QP", color = 'm')
plt.plot(figurex, gaugeNNSafe, label = "NN-gauge", color = 'b')
plt.plot(figurex, safeLine, label = "Safety Line", linestyle='--')
text1 = "safe"
plt.text(-0.7, 30.5, text1, {'color': 'black', 'fontsize': 18})
text2 = "unsafe"
plt.text(-0.7, -20.5, text2, {'color': 'black', 'fontsize': 18})
plt.xlabel('Time (s)', fontsize=18)
plt.ylabel("CBF Value", fontsize=18)
#plt.title("CBF values for each method")
#plt.axis([-5, 0, -5, 0])
plt.legend(prop={'size': 14}, frameon=False)
plt.savefig("figures/case5/cbfValues.png")
plt.show()

QPnnVelocity = [30.0, 29.830875396728516, 29.6634464263916, 29.497695922851562, 29.33360481262207, 29.171157836914062, 29.010334014892578, 28.8226318359375, 28.59185028076172, 28.32573127746582, 28.03105354309082, 27.71373748779297, 27.378942489624023, 27.031150817871094, 26.67424201965332, 26.311569213867188, 25.94601058959961, 25.58003044128418, 25.21572494506836, 24.85486602783203, 24.498943328857422, 24.14919090270996, 23.806629180908203, 23.472082138061523, 23.146203994750977, 22.829505920410156, 22.522371292114258, 22.22507095336914, 21.937782287597656, 21.660598754882812, 21.393545150756836, 21.136585235595703, 20.889633178710938, 20.652559280395508, 20.42519760131836, 20.172819137573242, 19.87738037109375, 19.546037673950195, 19.195419311523438, 18.837688446044922, 18.478958129882812, 18.121992111206055, 17.768043518066406, 17.417768478393555, 17.071653366088867, 16.730205535888672, 16.394054412841797, 16.063989639282227, 15.740961074829102, 15.426023483276367, 15.120235443115234, 14.824542045593262, 14.539692878723145, 14.26620864868164, 14.004414558410645, 13.754464149475098, 13.51635456085205, 13.289897918701172, 13.074697494506836, 12.870144844055176, 12.675455093383789, 12.489733695983887, 12.312047004699707, 12.14148235321045, 11.977189064025879, 11.818399429321289, 11.664437294006348, 11.514715194702148, 11.36872386932373, 11.226024627685547, 11.086240768432617, 10.949040412902832, 10.81413459777832, 10.681265830993652, 10.550199508666992, 10.420721054077148, 10.292628288269043, 10.165725708007812, 10.03982162475586, 9.914722442626953, 9.790229797363281, 9.666133880615234, 9.54221248626709, 9.418225288391113, 9.293909072875977, 9.168972969055176, 9.043096542358398, 8.915926933288574, 8.78707504272461, 8.65611457824707, 8.52258586883545, 8.386004447937012, 8.245869636535645, 8.101685523986816, 7.952983856201172, 7.799356460571289, 7.640493392944336, 7.476223468780518, 7.306553363800049, 7.131702423095703, 6.95211935043335, 6.768460273742676, 6.581487655639648, 6.391880035400391, 6.200062274932861, 6.006222248077393, 5.810502529144287, 5.613155364990234, 5.414574146270752, 5.215233325958252, 5.015632629394531, 4.816277027130127, 4.617699146270752, 4.42046594619751, 4.225090503692627, 4.031879901885986, 3.84090256690979, 3.652163505554199, 3.465805768966675, 3.282236099243164, 3.1022300720214844, 2.927093982696533, 2.758877754211426, 2.600498676300049, 2.455414295196533, 2.3264501094818115, 2.21419358253479, 2.116483211517334, 2.0296413898468018, 1.95012629032135, 1.8753653764724731, 1.8038015365600586, 1.7345987558364868, 1.667280912399292, 1.6014727354049683, 1.5368444919586182, 1.4731521606445312, 1.4102462530136108, 1.348044753074646, 1.2865058183670044, 1.2256096601486206, 1.1653509140014648, 1.1057374477386475, 1.0467960834503174, 0.9885861873626709, 0.9312288761138916, 0.874962329864502, 0.8202473521232605, 0.7679555416107178, 0.7196739912033081, 0.6780830025672913, 0.6470872163772583, 0.6309411525726318, 0.6320487260818481, 0.6494256854057312, 0.6801297068595886, 0.7218505144119263, 0.773768424987793, 0.8355836868286133, 0.9062308073043823, 0.9836208820343018, 1.0653754472732544, 1.1495550870895386, 1.2348928451538086, 1.320712924003601, 1.406790852546692, 1.4932692050933838, 1.5806324481964111, 1.6696891784667969, 1.7614628076553345, 1.856893539428711, 1.9564146995544434, 2.0597047805786133, 2.1658506393432617, 2.2737560272216797, 2.3824644088745117, 2.4912760257720947, 2.5997304916381836, 2.707542657852173, 2.814542531967163, 2.9206321239471436, 3.025757312774658, 3.129889965057373, 3.2330169677734375, 3.335134744644165, 3.4362447261810303, 3.5363523960113525, 3.6354641914367676, 3.733588457107544, 3.83073353767395, 3.9269087314605713, 4.022122859954834, 4.116385459899902, 4.209705829620361, 4.302093029022217, 4.393557071685791, 4.484106540679932, 4.5737504959106445, 4.6624979972839355, 4.750357627868652, 4.837338924407959]
GaugeNNVelocity = [30.0, 29.89788818359375, 29.795238494873047, 29.69205093383789, 29.56614875793457, 29.390169143676758, 29.171754837036133, 28.91779136657715, 28.6341552734375, 28.326139450073242, 27.998641967773438, 27.655954360961914, 27.301809310913086, 26.939449310302734, 26.571582794189453, 26.200666427612305, 25.829151153564453, 25.459041595458984, 25.09197998046875, 24.729360580444336, 24.372365951538086, 24.021987915039062, 23.67905044555664, 23.344221115112305, 23.018014907836914, 22.700807571411133, 22.392831802368164, 22.09418296813965, 21.80484390258789, 21.5246524810791, 21.253210067749023, 20.989717483520508, 20.73268699645996, 20.47941780090332, 20.225418090820312, 19.965389251708984, 19.697786331176758, 19.42730712890625, 19.16046905517578, 18.90181541442871, 18.653715133666992, 18.417211532592773, 18.192668914794922, 17.980127334594727, 17.779491424560547, 17.590639114379883, 17.413482666015625, 17.248029708862305, 17.089496612548828, 16.93668556213379, 16.790536880493164, 16.652265548706055, 16.52337646484375, 16.405611038208008, 16.300804138183594, 16.21062469482422, 16.136240005493164, 16.07803726196289, 16.035539627075195, 16.007535934448242, 15.99238109588623, 15.988282203674316, 15.993513107299805, 16.00653076171875, 16.02601432800293, 16.05085563659668, 16.080137252807617, 16.11309242248535, 16.14907455444336, 16.187536239624023, 16.22800064086914, 16.270055770874023, 16.31334114074707, 16.3575439453125, 16.402393341064453, 16.44765853881836, 16.49314308166504, 16.53868293762207, 16.584142684936523, 16.62940788269043, 16.67439079284668, 16.719018936157227, 16.763235092163086, 16.80699348449707, 16.85025978088379, 16.884502410888672, 16.909517288208008, 16.926443099975586, 16.93630027770996, 16.940013885498047, 16.938411712646484, 16.932235717773438, 16.922149658203125, 16.90874671936035, 16.89255714416504, 16.874046325683594, 16.853633880615234, 16.831689834594727, 16.808536529541016, 16.784461975097656, 16.759716033935547, 16.734521865844727, 16.709068298339844, 16.683521270751953, 16.65802764892578, 16.632709503173828, 16.6076717376709, 16.583003997802734, 16.558780670166016, 16.535064697265625, 16.51190757751465, 16.489349365234375, 16.467422485351562, 16.446151733398438, 16.425556182861328, 16.4056453704834, 16.38642692565918, 16.367902755737305, 16.35007095336914, 16.332927703857422, 16.316465377807617, 16.300670623779297, 16.285533905029297, 16.271039962768555, 16.257173538208008, 16.243921279907227, 16.23126220703125, 16.219181060791016, 16.207656860351562, 16.196672439575195, 16.186208724975586, 16.17624855041504, 16.166770935058594, 16.157758712768555, 16.14919090270996, 16.14105224609375, 16.13332176208496, 16.12598419189453, 16.119022369384766, 16.1124210357666, 16.10616111755371, 16.100229263305664, 16.094608306884766, 16.089284896850586, 16.084245681762695, 16.079477310180664, 16.07496452331543, 16.070695877075195, 16.06665802001953, 16.062841415405273, 16.059232711791992, 16.055824279785156, 16.05260467529297, 16.049562454223633, 16.046689987182617, 16.043977737426758, 16.041418075561523, 16.039003372192383, 16.036724090576172, 16.034574508666992, 16.03254508972168, 16.03063201904297, 16.02882957458496, 16.027130126953125, 16.025527954101562, 16.024017333984375, 16.022594451904297, 16.02125358581543, 16.019990921020508, 16.018800735473633, 16.017681121826172, 16.016626358032227, 16.01563262939453, 16.014698028564453, 16.013816833496094, 16.012989044189453, 16.012208938598633, 16.011474609375, 16.010784149169922, 16.010133743286133, 16.009523391723633, 16.008949279785156, 16.008407592773438, 16.00790023803711, 16.007421493530273, 16.00697135925293, 16.006547927856445, 16.00615119934082, 16.00577735900879, 16.00542640686035, 16.005096435546875, 16.00478744506836, 16.00449562072754, 16.004220962524414, 16.003963470458984, 16.003721237182617, 16.003494262695312, 16.003280639648438, 16.003080368041992, 16.002891540527344, 16.002714157104492]
nnVelocity = [30.0, 29.830875396728516, 29.6634464263916, 29.497695922851562, 29.33360481262207, 29.171157836914062, 29.010334014892578, 28.851118087768555, 28.693496704101562, 28.537464141845703, 28.38304901123047, 28.230449676513672, 28.080305099487305, 27.933040618896484, 27.787960052490234, 27.644515991210938, 27.502544403076172, 27.362003326416016, 27.22286605834961, 27.085121154785156, 26.948749542236328, 26.813730239868164, 26.68001937866211, 26.547502517700195, 26.415813446044922, 26.283733367919922, 26.147342681884766, 25.99648666381836, 25.816425323486328, 25.601200103759766, 25.35367202758789, 25.078929901123047, 24.782176971435547, 24.456480026245117, 24.08899688720703, 23.692384719848633, 23.28706169128418, 22.882587432861328, 22.482648849487305, 22.08987808227539, 21.70789909362793, 21.341596603393555, 20.99505615234375, 20.668733596801758, 20.36021614074707, 20.067771911621094, 19.792652130126953, 19.538990020751953, 19.311288833618164, 19.11116600036621, 18.93671417236328, 18.784303665161133, 18.65006446838379, 18.53038215637207, 18.42205810546875, 18.322402954101562, 18.229290008544922, 18.141109466552734, 18.056690216064453, 17.975210189819336, 17.896100997924805, 17.818986892700195, 17.74362564086914, 17.669876098632812, 17.597673416137695, 17.527008056640625, 17.457908630371094, 17.390445709228516, 17.32471466064453, 17.260831832885742, 17.198930740356445, 17.1391544342041, 17.08165168762207, 17.02656364440918, 16.974021911621094, 16.924137115478516, 16.876996994018555, 16.832653045654297, 16.791126251220703, 16.752395629882812, 16.716407775878906, 16.683080673217773, 16.652299880981445, 16.623931884765625, 16.597827911376953, 16.573827743530273, 16.551767349243164, 16.531484603881836, 16.512821197509766, 16.495624542236328, 16.479751586914062, 16.46506690979004, 16.451448440551758, 16.43878173828125, 16.426965713500977, 16.415904998779297, 16.405521392822266, 16.39573860168457, 16.386491775512695, 16.377721786499023, 16.36937713623047, 16.36141014099121, 16.353782653808594, 16.346458435058594, 16.33940887451172, 16.332603454589844, 16.326017379760742, 16.319631576538086, 16.313425064086914, 16.307382583618164, 16.301488876342773, 16.295732498168945, 16.290103912353516, 16.284589767456055, 16.279184341430664, 16.27387809753418, 16.268665313720703, 16.263538360595703, 16.258493423461914, 16.25352668762207, 16.248632431030273, 16.243806838989258, 16.23904800415039, 16.23435401916504, 16.229719161987305, 16.225143432617188, 16.220624923706055, 16.21615982055664, 16.211748123168945, 16.207387924194336, 16.20307731628418, 16.198814392089844, 16.194599151611328, 16.190431594848633, 16.186309814453125, 16.18222999572754, 16.17819595336914, 16.174203872680664, 16.17025375366211, 16.166343688964844, 16.1624755859375, 16.158647537231445, 16.15485954284668, 16.15110969543457, 16.14739990234375, 16.143726348876953, 16.140090942382812, 16.136493682861328, 16.132932662963867, 16.12940788269043, 16.125917434692383, 16.12246322631836, 16.119043350219727, 16.115659713745117, 16.112308502197266, 16.108991622924805, 16.1057071685791, 16.10245704650879, 16.099239349365234, 16.096054077148438, 16.0929012298584, 16.089778900146484, 16.086688995361328, 16.083629608154297, 16.08060073852539, 16.07760238647461, 16.074634552001953, 16.07169532775879, 16.06878662109375, 16.065906524658203, 16.06305503845215, 16.060232162475586, 16.057437896728516, 16.054672241210938, 16.05193328857422, 16.04922103881836, 16.046537399291992, 16.043880462646484, 16.041250228881836, 16.038644790649414, 16.03606605529785, 16.03351402282715, 16.030986785888672, 16.028484344482422, 16.0260066986084, 16.0235538482666, 16.02112579345703, 16.018722534179688, 16.01634407043457, 16.013988494873047, 16.011655807495117, 16.009347915649414, 16.007062911987305, 16.00480079650879, 16.002561569213867, 16.000343322753906, 15.998147964477539, 15.99597454071045, 15.993823051452637, 15.991693496704102, 15.989584922790527]
mpcVelocity = [30, 29.8223815074829, 29.6607867979834, 29.513770291685926, 29.380016821644432, 29.258329868373387, 29.147620855846267, 29.04689941331483, 28.916735748285156, 28.736998116002262, 28.517415192792875, 28.26622789903611, 27.990404864409726, 27.695827133990413, 27.38611199618479, 27.06066248850886, 26.717691386110175, 26.35687244535132, 25.978079387350707, 25.581234572129468, 25.1662673001606, 24.733073698555334, 24.281477291587493, 23.821395273349975, 23.386873313773403, 22.976491463062164, 22.588908603948397, 22.22285812288445, 21.877143783365373, 21.550635794687494, 21.2422671406697, 20.951030076904697, 20.67597284824281, 20.416196579781634, 20.17085232559782, 19.939138306403436, 19.72029729187478, 19.5136141100592, 19.31841332623361, 19.134057030392455, 18.959942750991658, 18.79550148712103, 18.64019584902257, 18.49351830193459, 18.35498950748342, 18.224156757184836, 18.100592492984337, 17.98389291004205, 17.87367663726902, 17.76958349079699, 17.671273296938537, 17.578424780477466, 17.49073451492433, 17.407915930733026, 17.32969837904278, 17.255826246836293, 17.18605812203705, 17.12016600374015, 17.057934559111278, 16.999160416984317, 16.94365150511926, 16.891226421586897, 16.84171384269864, 16.794951962575695, 16.750787964655164, 16.70907752217415, 16.669684326497816, 16.632479641692452, 16.59734188381578, 16.56415622359593, 16.53281421118014, 16.503213421666715, 16.47525712045961, 16.44885394709728, 16.423917616680104, 16.40036663799841, 16.378124046994813, 16.35711715549149, 16.33727731351621, 16.318539684973256, 16.300843035769844, 16.28412953383289, 16.268344559728522, 16.25343652864739, 16.239356721497202, 16.22605912585534, 16.213500285526877, 16.201639158550165, 16.190436983072182, 16.179857150676334, 16.16986508674696, 16.160428137480373, 16.15151546317313, 16.143097937438526, 16.135148052022576, 16.12763982690758, 16.12054872541015, 16.113851573995976, 16.107526486549332, 16.101552792849798, 16.095910971022533, 16.090582583741305, 16.085550217975776, 16.080797428086186, 16.076308682079425, 16.072069310850893, 16.06806546024624, 16.064284045786355, 16.06071270990765, 16.057339781577838, 16.0541542381553, 16.05114566936741, 16.048304243290026, 16.045620674217002, 16.04308619231476, 16.0406925149627, 16.038431819685815, 16.036296718591036, 16.034280234223793, 16.032375776765896, 16.030577122500077, 16.028878393469096, 16.0272740382733, 16.02575881392226, 16.024327768703007, 16.022976225995993, 16.021699768994992, 16.020494226271882, 16.019355658144555, 16.01828034380214, 16.01726476914546, 16.016305615303093, 16.015399747785352, 16.014544206240863, 16.013736194782226, 16.012973072849103, 16.012252346578975, 16.011571660657225, 16.010928790620056, 16.010321635584983, 16.009748211385222, 16.00920664408548, 16.00869516385798, 16.0082120991987, 16.00775587146496, 16.007324989716455, 16.00691804584289, 16.006533709962326, 16.006170726075148, 16.0058279079595, 16.005504135294736, 16.00519835000026, 16.00490955277772, 16.004636799845333, 16.004379199853645, 16.00413591097263, 16.00390613814057, 16.00368913046586, 16.003484178773093, 16.00329061328549, 16.0031078014361, 16.002935145800574, 16.002772082144812, 16.002618077581044, 16.002472628826386, 16.002335260558105, 16.00220552386029, 16.002082994756808, 16.00196727282575, 16.001857979890865, 16.001754758785708, 16.001657272186396, 16.001565201509273, 16.001478245869773, 16.00139612109914, 16.00131855881577, 16.00124530554815, 16.00117612190651, 16.001110781800524, 16.001049071700425, 16.00099078993923, 16.000935746053656, 16.00088376016173, 16.000834662374913, 16.000788292242923, 16.000744498229377, 16.00070313721659, 16.00066407403785, 16.000627181035707, 16.000592337644793, 16.000559429997825, 16.00052835055347, 16.000498997744913, 16.000471275647943, 16.000445093667473, 16.00042036624147, 16.000397012561365, 16.00037495630793, 16.000354125401913, 16.000334451768452, 16.000334451768452]
QPDiffnnVelocity = [30.0, 29.947681427001953, 29.89589500427246, 29.844635009765625, 29.74744987487793, 29.588468551635742, 29.37784194946289, 29.124488830566406, 28.836223602294922, 28.519886016845703, 28.18144416809082, 27.826093673706055, 27.458345413208008, 27.082101821899414, 26.700727462768555, 26.317110061645508, 25.933719635009766, 25.552650451660156, 25.175670623779297, 24.804262161254883, 24.439651489257812, 24.08284568786621, 23.734657287597656, 23.39572525024414, 23.066545486450195, 22.74748420715332, 22.438796997070312, 22.140640258789062, 21.853092193603516, 21.57615852355957, 21.30978775024414, 21.053871154785156, 20.808265686035156, 20.572790145874023, 20.34722900390625, 20.131351470947266, 19.924903869628906, 19.727619171142578, 19.53921890258789, 19.35941505432129, 19.187917709350586, 19.02443504333496, 18.868671417236328, 18.7203369140625, 18.579139709472656, 18.444791793823242, 18.317014694213867, 18.195531845092773, 18.080074310302734, 17.97037696838379, 17.86618995666504, 17.767263412475586, 17.673357009887695, 17.584239959716797, 17.49968910217285, 17.41948890686035, 17.343433380126953, 17.271324157714844, 17.20296859741211, 17.138181686401367, 17.07678985595703, 17.018625259399414, 16.963523864746094, 16.911334991455078, 16.86191177368164, 16.815114974975586, 16.77080726623535, 16.728866577148438, 16.689167022705078, 16.651594161987305, 16.616037368774414, 16.58238983154297, 16.550556182861328, 16.52043914794922, 16.491945266723633, 16.464994430541992, 16.439502716064453, 16.415393829345703, 16.39259147644043, 16.371030807495117, 16.35064125061035, 16.331363677978516, 16.31313705444336, 16.295902252197266, 16.279611587524414, 16.264209747314453, 16.249650955200195, 16.23588752746582, 16.222877502441406, 16.210580825805664, 16.198959350585938, 16.187976837158203, 16.177597045898438, 16.167787551879883, 16.15851593017578, 16.149755477905273, 16.141477584838867, 16.133655548095703, 16.126264572143555, 16.119279861450195, 16.112680435180664, 16.1064453125, 16.100553512573242, 16.094987869262695, 16.08972930908203, 16.084760665893555, 16.080066680908203, 16.075632095336914, 16.071441650390625, 16.06748390197754, 16.063743591308594, 16.060211181640625, 16.056873321533203, 16.053720474243164, 16.050743103027344, 16.047929763793945, 16.045270919799805, 16.042760848999023, 16.040390014648438, 16.038148880004883, 16.036033630371094, 16.034034729003906, 16.032146453857422, 16.030363082885742, 16.02867889404297, 16.027088165283203, 16.025585174560547, 16.024166107177734, 16.022825241088867, 16.02155876159668, 16.020362854003906, 16.01923179626465, 16.018163681030273, 16.01715660095215, 16.016204833984375, 16.015304565429688, 16.014455795288086, 16.013652801513672, 16.012895584106445, 16.01218032836914, 16.011503219604492, 16.0108642578125, 16.01026153564453, 16.00969123840332, 16.009153366088867, 16.00864601135254, 16.00816535949707, 16.00771141052246, 16.00728416442871, 16.006879806518555, 16.006498336791992, 16.00613784790039, 16.00579833984375, 16.005475997924805, 16.005172729492188, 16.004886627197266, 16.004615783691406, 16.00436019897461, 16.004117965698242, 16.003889083862305, 16.003673553466797, 16.003469467163086, 16.003276824951172, 16.003095626831055, 16.0029239654541, 16.002761840820312, 16.002609252929688, 16.002464294433594, 16.00232696533203, 16.002197265625, 16.0020751953125, 16.00196075439453, 16.00185203552246, 16.00174903869629, 16.001651763916016, 16.00156021118164, 16.001474380493164, 16.001392364501953, 16.001314163208008, 16.00124168395996, 16.00117301940918, 16.001108169555664, 16.00104522705078, 16.000988006591797, 16.000932693481445, 16.00088119506836, 16.000831604003906, 16.00078582763672, 16.000741958618164, 16.000699996948242, 16.000661849975586, 16.000625610351562, 16.000591278076172, 16.000558853149414, 16.00052833557129, 16.000497817993164, 16.000471115112305, 16.000444412231445, 16.00041961669922, 16.000396728515625, 16.000375747680664]
#OptimalVelocity = [30, 29.450000000000784, 28.905500000003073, 28.366445000008156, 27.8327805500127, 27.304452744518557, 26.781408217074585, 26.263594134913234, 25.75095819356605, 25.243448611633085, 24.741014125520493, 24.243603984271246, 23.75116794450902, 23.268086089782898, 22.836515577588003, 22.45096375294314, 22.106523317737555, 21.798811386406612, 21.523910683546262, 21.278323684449077, 21.058923188381428, 20.862918020269447, 20.68781276760717, 20.531379346926627, 20.391625711958923, 20.266773738029045, 20.155236543883802, 20.055591023634108, 19.966571537834653, 19.887045520897885, 19.815999599455438, 19.752529103451252, 19.695826976725456, 19.645169346070688, 19.59991446539965, 19.559484022732605, 19.523364634200448, 19.491097415285168, 19.46227020136361, 19.436518652734733, 19.413511832632324, 19.392957253260107, 19.374595011101263, 19.358191628270973, 19.34353618834406, 19.3304448359048, 19.318749375712486, 19.308299724309705, 19.298964661624538, 19.29062594080392, 19.283176328339152, 19.276520801011756, 19.27057500198414, 19.265263151215777, 19.260517891678873, 19.256278481733986, 19.25248634200966, 19.249102379506127, 19.246080464356567, 19.24337840114778, 19.240963189294263, 19.238807984542518, 19.23688313230393, 19.235162728246024, 19.233626087709652, 19.232252833924818, 19.231026028877565, 19.229929087709806, 19.228949145876058, 19.228073858150168, 19.227291664458463, 19.226591869855056, 19.225966912550845, 19.225406798863517, 19.22490688720896, 19.224460059457414, 19.224060381328428, 19.223701781719186, 19.22338158804733, 19.223094605824045, 19.22283531854751, 19.22260444993016, 19.222395554982413, 19.22220924706221, 19.222041230066196, 19.22188935637388, 19.221752554062874, 19.22162726398713, 19.221511611217323, 19.221406629342596, 19.221310156157372, 19.221220793334894, 19.221137226686196, 19.221058273610282, 19.22098240103135, 19.220910083874656, 19.220839814578994, 19.22076956373151, 19.220700659111273, 19.22062971607474, 19.22055751565459, 19.22048316633534, 19.220405698208012, 19.220323165199645, 19.2202348370227, 19.22013788996989, 19.220035994651553, 19.219924169262654, 19.219800999087113, 19.219665745596018, 19.21951640304016, 19.219351118276094, 19.21916820027353, 19.218964846595654, 19.218738470627585, 19.218486352773724, 19.218203730030837, 19.21789010425772, 19.217540161081487, 19.217148624274756, 19.216710075615026, 19.21622082319591, 19.215672758491465, 19.215060922122717, 19.214376285444942, 19.213610354294445, 19.212753711602545, 19.211794474788903, 19.210714117616888, 19.209512634858783, 19.208168006597532, 19.20666481830898, 19.204981813052, 19.203097958749794, 19.20098924866039, 19.198626841827732, 19.195982892236998, 19.19302424129495, 19.1897117473862, 19.18600434841666, 19.181854984869318, 19.177210409051256, 19.172011451211716, 19.166191820760574, 19.159677706353506, 19.152386328786335, 19.14422439349049, 19.135089468451298, 19.124862560591126, 19.113414972982966, 19.10060123622098, 19.08625807549879, 19.070203251239363, 19.052232516547335, 19.032117177233857, 19.009598710393533, 18.98439645093221, 18.956186315136648, 18.924604586063978, 18.889254785874513, 18.84968503202549, 18.805393947239338, 18.755815205584966, 18.700318244515003, 18.638205759591187, 18.56867412117154, 18.490838552091546, 18.40363237785361, 18.306152185677163, 18.197052777569922, 18.075023071048676, 17.95974401149563, 17.850869344285158, 17.748043266113243, 17.650929745883758, 17.559211429830512, 17.472588578863252, 17.390778102260896, 17.313512652117566, 17.24053972692856, 17.17162085328303, 17.10653080589394, 17.04505687207667, 16.98699815650302, 16.932164926142406, 16.880377985828517, 16.831468088230594, 16.78527542595306, 16.74164901360902, 16.70044628706222, 16.661532606955788, 16.624780794897774, 16.59007075227366, 16.55728904389403, 16.52632854148696, 16.49708806678018, 16.469472063188718, 16.44339028153452, 16.41875748817081, 16.395493183639218, 16.37]

figurex = np.linspace(0, len(QPnnVelocity), num=len(QPnnVelocity)) * 0.1
velocityLine = np.linspace(16, 16, num=len(QPnnVelocity))
plt.plot(figurex, mpcVelocity, label = "MPC", color = 'r')
plt.plot(figurex, nnVelocity, label = "NN", color = 'y')
plt.plot(figurex, QPnnVelocity, label = "NN-QP", color = 'c')
plt.plot(figurex, QPDiffnnVelocity, label = "NN-diff-QP", color = 'm')
plt.plot(figurex, GaugeNNVelocity, label = "NN-gauge", color = 'b')
plt.plot(figurex, velocityLine, label = "Leading Car Velocity", linestyle='--')
#plt.plot(figurex, OptimalVelocity, label = "Optimal")
plt.xlabel('Time (s)', fontsize=18)
plt.ylabel("Velocity (m/s)", fontsize=18)
#plt.title("Velocity curves for each method")
#plt.axis([-5, 0, -5, 0])
plt.legend(prop={'size': 14}, frameon=False)
plt.savefig("figures/case5/velocitys.png")

plt.show()